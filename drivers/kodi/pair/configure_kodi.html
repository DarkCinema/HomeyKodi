<script type="text/javascript">       
    // Set window options
    var width	= 400;
    var height	= 400;
    var left	= (screen.width/2)-(width/2);
    var top		= (screen.height/2)-(height/2);
    var url;   
	
	function configure()
	{		
		var name = $("#name").val();
		var ipAddress = $("#ip_address").val();
		var port = $("#port").val();
		var username = $("#username").val();
		var password = $("#password").val();
	
		var params = {
			name: name,
			host: ipAddress,
			httpPort: port,
			username: username,
			password: password
		}	
		
		Homey.emit( 'configure_kodi', params, function ( err, result ) {
			if(err) {
				alert(err);
			}
			else {
				//Successfully connected
				Homey.addDevice({
					data: { // this data object is saved to- and unique for the device. It is passed on the get and set functions as 1st argument
						id: ipAddress // something unique, so your driver knows which physical device it is. A MAC address or Node ID, for example. This is required
					},
					name: name, // the name for this device (optional),
					settings: { 
						host: ipAddress,
						http_port: port,
						username: username,
						password: password
					} // initial settings (optional)
				}, function( err, result ){
					if( err ) return console.error(err);
					console.log( result);
				});
				
				//Done pairing
				Homey.done();
			}			
		} );	
	}    
</script>

<p id="authentication_text" data-i18n="pair.authorization.configuration_explanation"></p>
<table>
	<tr>
		<td>Name:</td><td><input type="textbox" id="name"></input></td>
	</tr>
	<tr>
		<td>IP Address:</td><td><input type="textbox" id="ip_address"></input></td>
	</tr>
	<tr>
		<td>Port:</td><td><input type="textbox" id="port"></input></td>
	</tr>
	<tr>
		<td>Username:</td><td><input type="textbox" id="username"></input></td>
	</tr>
	<tr>
		<td>Password:</td><td><input type="textbox" id="password"></input></td>
	</tr>
</table>
<button class="button" id="authentication_button" onclick="configure();"><p
        data-i18n="pair.authorization.start_configuration"></p></button>