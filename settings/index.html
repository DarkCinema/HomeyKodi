<!doctype html>
<html>
<head>
  <script type="text/javascript" src="/manager/webserver/assets/js/jquery.js"></script>
</head>
<body>

<h1 data-i18n="settings.title"></h1>
<p data-i18n="settings.intro"></p>
<style>

  table#logs {
    -webkit-user-select: initial !important;
  }

  table#logs tr th.datetime, table#logs tr td.datetime {
    font-size:12px;
    width:175px;
  }

  table#logs tr th.entry, table#logs tr td.entry {
    font-size:12px;
  }

  fieldset#logs {
    overflow-y: scroll;
    max-height: 200px;
  }

</style>

<fieldset id="logs">
    <legend data-i18n="settings.loglegend"></legend>

    <table id="logs">
      <tr>
        <th class="datetime">Datetime</th>
        <th class="entry">Entry</th>
      </tr>
    </table>

</fieldset>

<script type="text/javascript">
    // Initialize Homey
    function onHomeyReady() {
      // Delete previous entries if present
      $('tr.logentry').remove();

      Homey.get("currentLogs", function (err, value) {
        if (value != null) {

          $.each(value , function( index, obj ) {
            var html = "<tr class='logentry'><td class='datetime'>" + value[index]['datetime'] + "</td><td class='entry'>" + value[index]['message'] + "</td></tr>";
            $("table#logs").append(html);
          });

        }
      });
      
      // Ready
      Homey.ready();
    }
</script>

</body>
</html>